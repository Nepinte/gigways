<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- ✅ SEO -->
  <title>Gigways Marketplace | Insurance, Taxes & Driver Benefits</title>
  <meta
    name="description"
    content="A gig-driver marketplace for car insurance, life insurance, tax filing, and driver tools—powered by trusted partners and affiliate offers."
  />
  <meta name="author" content="Gigways Team" />
  <meta name="robots" content="index,follow,max-image-preview:large" />
  <link rel="canonical" href="https://gigways.com/market" />
  <meta
    name="keywords"
    content="gig driver insurance, rideshare insurance, delivery driver insurance, car insurance quotes, life insurance, 1099 tax filing, gig worker taxes, mileage tracking, gig driver benefits, roadside assistance, tires, NTB, Mavis"
  />

  <!-- ✅ Social Sharing -->
  <meta property="og:title" content="Gigways Marketplace | Insurance, Taxes & Driver Benefits" />
  <meta property="og:description" content="Compare insurance, file taxes, and access benefits for gig workers through trusted partners." />
  <meta property="og:image" content="https://gigways.com/assets/img/App.png" />
  <meta property="og:url" content="https://gigways.com/market" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="Gigways" />

  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Gigways Marketplace | Insurance, Taxes & Driver Benefits" />
  <meta name="twitter:description" content="Compare insurance, file taxes, and access benefits for gig workers through trusted partners." />
  <meta name="twitter:image" content="https://gigways.com/assets/img/App.png" />

  <link rel="icon" href="assets/img/App.png" />

  <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin />
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin />

  <link rel="stylesheet" href="assets/css/styles.css" />
  <link href="https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />

  <!-- ✅ Structured Data (Services) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Gigways Marketplace",
    "url": "https://gigways.com/market",
    "description": "Insurance, tax filing, and benefits marketplace for gig drivers via partners and affiliates.",
    "breadcrumb": {
      "@type": "BreadcrumbList",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "name": "Home", "item": "https://gigways.com/" },
        { "@type": "ListItem", "position": 2, "name": "Marketplace", "item": "https://gigways.com/market" }
      ]
    },
    "mainEntity": {
      "@type": "ItemList",
      "name": "Gig Driver Services",
      "itemListElement": [
        { "@type": "ListItem", "position": 1, "item": { "@type": "Service", "name": "Tax Filing (1099)" } },
        { "@type": "ListItem", "position": 2, "item": { "@type": "Service", "name": "Tire Deals (Guaranteed Lowest Prices)" } },
        { "@type": "ListItem", "position": 3, "item": { "@type": "Service", "name": "Car Insurance (Gig/Rideshare)" } },
        { "@type": "ListItem", "position": 4, "item": { "@type": "Service", "name": "Legal Help" } },
        { "@type": "ListItem", "position": 5, "item": { "@type": "Service", "name": "Driver Tools" } }
      ]
    }
  }
  </script>

  <style>
    /* Keep scrollbar to prevent layout shift */
    html { overflow-y: scroll; }

    /* ====== Page background wrapper (keep your existing look) ====== */
    .market.section {
      max-width: 100%;
      padding-top: calc(var(--header-height) + 2rem);
      padding-bottom: 4rem;
      position: relative;
      overflow: visible;
      background: linear-gradient(to bottom, rgba(191, 168, 137, 0.03) 0%, transparent 50%);
    }

    .dark-theme .market.section {
      background: linear-gradient(to bottom, rgba(191, 168, 137, 0.08) 0%, transparent 50%);
    }

    .market.section::before {
      content: "";
      position: absolute;
      top: -200px;
      left: -200px;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(191, 168, 137, 0.15) 0%, transparent 70%);
      pointer-events: none;
    }

    .market.section::after {
      content: "";
      position: absolute;
      bottom: -200px;
      right: -200px;
      width: 600px;
      height: 600px;
      background: radial-gradient(circle, rgba(143, 122, 91, 0.12) 0%, transparent 70%);
      pointer-events: none;
    }

    .mk-container {
      width: min(1200px, 100%);
      margin-inline: auto;
      padding-inline: 1.5rem;
      position: relative;
      z-index: 1;
    }

    /* ====== HERO (unchanged) ====== */
    .mk-hero {
      border-radius: 24px;
      border: 1px solid var(--glass-bd);
      background: var(--glass);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      box-shadow: var(--shadow-lg);
      padding: 2rem;
      margin-bottom: 2.5rem;
      position: relative;
      overflow: hidden;
    }

    .mk-hero::before {
      content: "";
      position: absolute;
      top: -100px;
      left: -100px;
      width: 400px;
      height: 400px;
      background: radial-gradient(circle, rgba(191, 168, 137, 0.12) 0%, transparent 70%);
      pointer-events: none;
    }

    .mk-hero > * { position: relative; z-index: 1; }

    .mk-head {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: 1.5rem;
      flex-wrap: wrap;
    }

    .mk-title {
      margin: 0.5rem 0 0.75rem;
      font-size: clamp(1.85rem, 3vw, 2.65rem);
      line-height: 1.15;
      letter-spacing: -0.02em;
      color: var(--second-color);
      font-weight: 900;
    }

    .mk-sub {
      margin: 0;
      color: var(--text-color-light);
      max-width: 60ch;
      line-height: 1.6;
      font-size: 1.05rem;
    }

    .mk-kicker {
      display: inline-flex;
      gap: 0.5rem;
      align-items: center;
      padding: 0.5rem 1rem;
      border-radius: 999px;
      background: var(--button-grad);
      font-weight: 800;
      font-size: 0.9rem;
      color: white;
      white-space: nowrap;
      box-shadow: 0 4px 12px rgba(143, 122, 91, 0.3);
    }

    .mk-kicker i { font-size: 1.1rem; }

    .mk-disclosure {
      margin-top: 1.5rem;
      border-radius: 16px;
      border: 1px solid var(--chip-bd);
      background: var(--chip-bg);
      padding: 1rem 1.25rem;
      color: var(--text-color-light);
      line-height: 1.6;
      font-size: 0.95rem;
    }

    .mk-disclosure strong { color: var(--second-color); }

    .mk-stats {
      margin-top: 1.5rem;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
    }

    .mk-stat {
      border-radius: 16px;
      border: 1px solid var(--glass-bd);
      background: rgba(255, 255, 255, 0.4);
      padding: 1.25rem;
      display: flex;
      gap: 1rem;
      align-items: flex-start;
      box-shadow: var(--shadow-sm);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .dark-theme .mk-stat { background: rgba(255, 255, 255, 0.06); }

    .mk-stat:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }

    .mk-stat i { font-size: 1.5rem; color: var(--third-color); margin-top: 0.1rem; }
    .mk-stat b { display: block; color: var(--second-color); font-size: 1.05rem; margin-bottom: 0.25rem; }
    .mk-stat span { display: block; color: var(--text-color-light); font-size: 0.95rem; line-height: 1.4; }

    /* ====== NEW LISTINGS GRID (Airbnb-like) ====== */
    .mk-grid{
      display: grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap: 1.25rem;
    }
    @media (max-width: 1100px){
      .mk-grid{ grid-template-columns: repeat(2, minmax(0, 1fr)); }
    }
    @media (max-width: 768px){
      .mk-container{ padding-inline: 1rem; }
      .mk-grid{ grid-template-columns: 1fr; }
    }

    /* Card */
    .mk-card{
      border-radius: 22px;
      overflow: hidden;
      border: 1px solid var(--glass-bd);
      background: var(--glass);
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: var(--shadow-sm);
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
      display:flex;
      flex-direction: column;
      min-height: 430px;
      position: relative;
      isolation: isolate;
    }
    .mk-card:hover{
      transform: translateY(-6px);
      box-shadow: var(--shadow-lg);
      border-color: var(--chip-bd);
    }

    /* =========================
       IMAGE IMPROVEMENTS
       ========================= */
    .mk-media{
      position: relative;
      aspect-ratio: 4 / 3;
      overflow:hidden;
      background:
        radial-gradient(circle at 20% 10%, rgba(255,255,255,.55), rgba(255,255,255,.18) 55%, rgba(0,0,0,.04)),
        rgba(0,0,0,.04);
    }
    .dark-theme .mk-media{
      background:
        radial-gradient(circle at 20% 10%, rgba(255,255,255,.10), rgba(255,255,255,.04) 55%, rgba(0,0,0,.35)),
        rgba(0,0,0,.25);
    }

    .mk-media img{
      width:100%;
      height:100%;
      display:block;
      object-fit: cover;
      transform: scale(1.02);
      image-rendering: auto;
      -webkit-font-smoothing: antialiased;
      backface-visibility: hidden;
    }

    .mk-media img.is-local{
      object-fit: contain;
      transform: none;
      padding: 18px;
      filter: drop-shadow(0 10px 22px rgba(0,0,0,.10));
    }
    .dark-theme .mk-media img.is-local{
      filter: drop-shadow(0 12px 26px rgba(0,0,0,.35));
    }

    .mk-media::after{
      content:"";
      position:absolute;
      inset:0;
      background: linear-gradient(to top, rgba(0,0,0,.26), transparent 52%);
      pointer-events:none;
      z-index:1;
    }

    .mk-badgeRow{
      position:absolute;
      top: 12px;
      left: 12px;
      right: 12px;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      z-index:2;
    }

    .mk-badge{
      display:inline-flex;
      align-items:center;
      gap:7px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(255,255,255,.92);
      border: 1px solid rgba(0,0,0,.08);
      font-weight: 900;
      font-size: .82rem;
      color:#111;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      white-space: nowrap;
    }
    .dark-theme .mk-badge{
      background: rgba(20,22,28,.86);
      border-color: rgba(255,255,255,.12);
      color: #fff;
      box-shadow: 0 12px 24px rgba(0,0,0,.30);
    }
    .mk-badge i{ color: var(--third-color); font-size: 1.05rem; }

    .mk-arrows{
      position:absolute;
      inset: 0;
      display:flex;
      align-items:center;
      justify-content: space-between;
      padding: 0 10px;
      pointer-events:none;
      z-index:2;
    }
    .mk-arrow{
      pointer-events:auto;
      width: 40px;
      height: 40px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,.10);
      background: rgba(255,255,255,.92);
      cursor:pointer;
      display:grid;
      place-items:center;
      opacity: 0;
      transform: translateY(4px);
      transition: opacity .18s ease, transform .18s ease;
      box-shadow: 0 12px 26px rgba(0,0,0,.14);
    }
    .dark-theme .mk-arrow{
      background: rgba(20,22,28,.82);
      border-color: rgba(255,255,255,.14);
      box-shadow: 0 12px 26px rgba(0,0,0,.34);
    }
    .mk-arrow i{ font-size: 1.45rem; color: var(--second-color); }
    .mk-card:hover .mk-arrow{ opacity: 1; transform: translateY(0); }

    .mk-dots{
      position:absolute;
      bottom: 10px;
      left: 0;
      right: 0;
      display:flex;
      justify-content:center;
      gap:6px;
      z-index:2;
      pointer-events:none;
    }
    .mk-dot{
      width: 7px;
      height: 7px;
      border-radius: 999px;
      background: rgba(255,255,255,.55);
      border: 1px solid rgba(0,0,0,.12);
      box-shadow: 0 10px 20px rgba(0,0,0,.12);
    }
    .mk-dot[aria-current="true"]{ background: rgba(255,255,255,.98); }
    .dark-theme .mk-dot{ background: rgba(255,255,255,.22); border-color: rgba(255,255,255,.12); }
    .dark-theme .mk-dot[aria-current="true"]{ background: rgba(255,255,255,.92); }

    .mk-body{
      padding: 14px 14px 16px;
      display:flex;
      flex-direction: column;
      gap: 10px;
      flex: 1;
    }

    .mk-topLine{
      display:flex;
      align-items:flex-start;
      justify-content: space-between;
      gap: 10px;
    }

    .mk-h3{
      margin:0;
      font-weight: 950;
      font-size: 1.05rem;
      letter-spacing: -0.01em;
      color: var(--second-color);
      line-height: 1.25;
    }

    .mk-meta{
      margin:0;
      color: var(--text-color-light);
      font-weight: 700;
      font-size: .92rem;
      line-height: 1.35;
    }

    .mk-partner{
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid var(--chip-bd);
      background: var(--chip-bg);
    }
    .mk-partnerLeft{
      display:flex;
      align-items:center;
      gap:10px;
      min-width:0;
    }
    .mk-partnerLogo{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      background: #fff;
      border: 1px solid rgba(0,0,0,.08);
      overflow:hidden;
      display:grid;
      place-items:center;
      flex-shrink:0;
    }
    .dark-theme .mk-partnerLogo{ background: rgba(255,255,255,.92); }
    .mk-partnerLogo img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      padding: 8px;
      display:block;
    }
    .mk-partnerText{
      min-width:0;
      display:flex;
      flex-direction: column;
      gap:2px;
    }
    .mk-partnerText b{
      font-size: .92rem;
      font-weight: 950;
      color: var(--second-color);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }
    .mk-partnerText span{
      font-size: .82rem;
      font-weight: 800;
      color: var(--text-color-light);
      white-space: nowrap;
      overflow:hidden;
      text-overflow: ellipsis;
    }

    .mk-pills{
      display:flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .mk-pill{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 7px 10px;
      border-radius: 999px;
      border: 1px solid var(--chip-bd);
      background: var(--chip-bg);
      font-weight: 900;
      font-size: .78rem;
      color: var(--second-color);
    }
    .mk-pill i{ color: var(--third-color); font-size: 1rem; }

    .mk-bottom{
      margin-top: auto;
      display:flex;
      align-items:flex-end;
      justify-content: space-between;
      gap: 10px;
      padding-top: 4px;
    }

    .mk-price{
      font-weight: 950;
      font-size: 1.05rem;
      color: var(--second-color);
      letter-spacing: -0.02em;
    }
    .mk-price span{
      font-weight: 800;
      font-size: .92rem;
      color: var(--text-color-light);
    }

    .mk-actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    .mk-cta{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding: 10px 12px;
      border-radius: 14px;
      border: none;
      background: var(--button-grad);
      color:#fff;
      cursor:pointer;
      font-weight: 950;
      box-shadow: 0 12px 26px rgba(143,122,91,.22);
      transition: transform .15s ease, box-shadow .15s ease;
      text-decoration:none;
      white-space: nowrap;
    }
    .mk-cta:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px rgba(143,122,91,.32); }
    .mk-cta i{ font-size: 1.2rem; }

    .mk-infoBtn{
      width: 44px;
      height: 44px;
      border-radius: 14px;
      border: 1px solid var(--glass-bd);
      background: rgba(255,255,255,.55);
      cursor:pointer;
      display:grid;
      place-items:center;
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .dark-theme .mk-infoBtn{ background: rgba(255,255,255,.08); }
    .mk-infoBtn:hover{ transform: translateY(-1px); box-shadow: var(--shadow-sm); }
    .mk-infoBtn i{ font-size: 1.35rem; color: var(--second-color); }

    .modal__content .mk-modalPills{
      display:flex;
      flex-wrap: wrap;
      gap: 10px;
      margin: 12px 0 4px;
      padding:0;
      list-style:none;
    }
    .modal__content .mk-modalPills li{
      margin:0;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--chip-bd);
      background: var(--chip-bg);
      font-weight: 900;
      font-size: .85rem;
      color: var(--second-color);
    }

    .trk {
      position:absolute;
      left:-9999px;
      width:1px;
      height:1px;
      overflow:hidden;
    }

    @media (max-width: 768px) {
      .mk-hero { padding: 1.5rem; }
      .mk-title { font-size: 1.85rem; }
      .mk-stats { grid-template-columns: 1fr; }
      .modal__dialog { padding: 1.5rem; }
      .mk-actions{ width: 100%; justify-content: space-between; }
      .mk-cta{ flex: 1; }
    }
  </style>
</head>

<body>
  <div class="bubble-container"></div>

  <!-- Toast -->
  <div class="toast" id="toast" role="status" aria-live="polite"></div>

  <!-- HEADER -->
  <header class="l-header">
    <nav class="nav bd-grid">
      <div><a href="index.html" class="nav__logo">Gigways</a></div>

      <div class="nav__menu" id="nav-menu">
        <ul class="nav__list">
          <li class="nav__item"><a href="index.html" class="nav__link">Home</a></li>
          <li class="nav__item"><a href="index.html#about" class="nav__link">About</a></li>
          <li class="nav__item"><a href="partners.html" class="nav__link">Car Advertising</a></li>
          <li class="nav__item"><a href="market.html" class="nav__link active" aria-current="page">Marketplace</a></li>
          <li class="nav__item"><a href="careers.html" class="nav__link">Careers</a></li>
        </ul>
      </div>

      <div class="theme">
        <img src="assets/img/moon.png" id="iconMS" alt="Toggle theme" />
      </div>

      <div class="nav__toggle" id="nav-toggle"><i class="bx bx-menu"></i></div>
    </nav>
  </header>

  <!-- MAIN -->
  <main class="l-main">
    <section class="market section" id="market">
      <div class="mk-container">

        <!-- HERO -->
        <div class="mk-hero">
          <div class="mk-head">
            <div>
              <span class="mk-kicker"><i class="bx bx-store"></i> Driver-First Marketplace</span>
              <h1 class="mk-title">Services Built for Gig Workers</h1>
              <p class="mk-sub">Insurance, taxes, benefits, and tools designed around the realities of gig driving.</p>
            </div>
          </div>

          <div class="mk-disclosure">
            <strong>Partner & Affiliate Disclosure:</strong>
            Some links on this page are partner or affiliate links. If you choose a service through them, Gigways may earn a commission at no extra cost to you.
          </div>

          <div class="mk-stats" aria-label="Marketplace highlights">
            <div class="mk-stat">
              <i class="bx bx-check-shield" aria-hidden="true"></i>
              <div><b>Driver-First Picks</b><span>Focused on gig work realities</span></div>
            </div>
            <div class="mk-stat">
              <i class="bx bx-timer" aria-hidden="true"></i>
              <div><b>Fast Comparisons</b><span>Get started in minutes</span></div>
            </div>
            <div class="mk-stat">
              <i class="bx bx-link-external" aria-hidden="true"></i>
              <div><b>Trusted Partners</b><span>Offers via affiliates & partners</span></div>
            </div>
          </div>
        </div>

        <!-- ✅ LISTINGS GRID -->
        <div class="mk-grid" id="serviceGrid" aria-label="Marketplace listings"></div>

      </div>
    </section>
  </main>

  <!-- MODAL -->
  <div class="modal" id="modal" aria-hidden="true" role="dialog" aria-modal="true" aria-label="Service details">
    <div class="modal__dialog" role="document">
      <button class="modal__close" type="button" aria-label="Close">×</button>
      <div class="modal__content" id="modalContent"></div>
    </div>
  </div>

  <!-- FOOTER -->
  <footer class="footer">
    <div class="footer__container">
      <div class="footer__content">
        <h2 class="footer__title">Gigways LLC</h2>
        <p class="footer__description">Making work easier, safer, and more organized for gig workers</p>
      </div>

      <div class="footer__content">
        <h3 class="footer__subtitle">Quick Links</h3>
        <ul class="footer__links">
          <li><a href="index.html" class="footer__link">Home</a></li>
          <li><a href="index.html#features" class="footer__link">Features</a></li>
          <li><a href="market.html" class="footer__link">Marketplace</a></li>
          <li><a href="partners.html#forms" class="footer__link">Car Advertising</a></li>
          <li><a href="careers.html" class="footer__link">Careers</a></li>
          <li><a href="privacy-policy.html" class="footer__link">Privacy Policy</a></li>
          <li><a href="faq.html" class="footer__link">FAQ Support</a></li>
        </ul>
      </div>

      <div class="footer__content">
        <h3 class="footer__subtitle">Connect With Us</h3>
        <div class="footer__social">
          <a href="https://www.facebook.com/profile.php?id=61574801146211" class="footer__icon" aria-label="Gigways on Facebook">
            <i class="bx bxl-facebook"></i>
          </a>
          <a href="https://x.com/gigways" class="footer__icon" aria-label="Gigways on X">
            <i class="bx bxl-twitter"></i>
          </a>
          <a href="https://www.instagram.com/gigways/" class="footer__icon" aria-label="Gigways on Instagram">
            <i class="bx bxl-instagram"></i>
          </a>
          <a href="mailto:Support@gigways.com" class="footer__icon" aria-label="Email support">
            <i class="bx bxs-envelope"></i>
          </a>
        </div>
      </div>
    </div>

    <div class="footer__bottom">
      <p class="footer__copy">© Gigways LLC <span id="year"></span>. All rights reserved.</p>
    </div>
  </footer>

  <script>
    // =========================
    // Keep your theme preload
    // =========================
    (function () {
      const root = document.documentElement;
      root.classList.add("preload");
      const t = localStorage.getItem("selected-theme");
      if (t === "dark") root.classList.add("dark-theme");
      window.addEventListener("load", () => root.classList.remove("preload"));
    })();

    // Footer year
    const yearEl = document.getElementById("year");
    if (yearEl) yearEl.textContent = new Date().getFullYear();

    // Mobile nav toggle
    const navMenu = document.getElementById("nav-menu");
    const navToggle = document.getElementById("nav-toggle");
    if (navToggle && navMenu) navToggle.addEventListener("click", () => navMenu.classList.toggle("show"));
    document.querySelectorAll(".nav__link").forEach((a) =>
      a.addEventListener("click", () => navMenu && navMenu.classList.remove("show"))
    );

    // Theme toggle
    const themeButton = document.getElementById("iconMS");
    const root = document.documentElement;

    function setTheme(mode) {
      if (mode === "dark") root.classList.add("dark-theme");
      else root.classList.remove("dark-theme");
      localStorage.setItem("selected-theme", mode);
    }
    function syncThemeIcon() {
      if (!themeButton) return;
      const isDark = root.classList.contains("dark-theme");
      themeButton.src = isDark ? "assets/img/sun.png" : "assets/img/moon.png";
    }
    if (themeButton) {
      syncThemeIcon();
      themeButton.addEventListener("click", () => {
        const isDark = root.classList.contains("dark-theme");
        setTheme(isDark ? "light" : "dark");
        syncThemeIcon();
        renderListings();
      });
    }

    // =========================
    // LISTINGS DATA
    // =========================
    const LISTINGS = [
      {
        id: "tax-efile",
        category: "taxes",
        title: "Tax Filing (1099) — Save 20%",
        meta: "Gig Worker Taxes • Deductions",
        price: 32.99,
        priceUnit: "starting",
        reviews: 1820,
        badge: "Top Offer",
        badgeIcon: "bx-purchase-tag",
        partnerName: "E-file.com",
        partnerSub: "Guided 1099 filing",
        partnerLogo: "assets/img/e-file.png",
        pills: ["1099 Support", "Mileage + Expenses", "Guided Filing"],
        desc: "Gig drivers often have deductions like mileage and expenses. Use a guided filing flow and save with coupon code SAVE24 when available.",
        linkPrimary: "https://www.dpbolvw.net/click-101499113-11917173",
        linkSecondary: "https://www.dpbolvw.net/click-101499113-11917143",
        secondaryLabel: "State filing • $10 off",
        pixels: [
          "https://www.ftjcfx.com/image-101499113-11917173",
          "https://www.ftjcfx.com/image-101499113-11917143"
        ],
        images: [
          "assets/img/e-file.png",
          "assets/img/e-file1.png"
        ]
      },
      {
        id: "tires-mavis",
        category: "tires",
        title: "Tire Deals (Guaranteed Lowest Prices)",
        meta: "Mavis / NTB • Shop Online",
        price: 73.99,
        priceUnit: "from",
        reviews: 945,
        badge: "Top Deal",
        badgeIcon: "bx-badge-check",
        partnerName: "Mavis / NTB",
        partnerSub: "Compare deals & brands",
        partnerLogo: "assets/img/mavis.png",
        pills: ["Brand-name tires", "Compare prices", "Install options"],
        desc: "Tires are one of the biggest driver expenses. Compare deals and shop quickly to stay safe and keep earning.",
        linkPrimary: "https://www.dpbolvw.net/click-101499113-15767014",
        pixels: ["https://www.tqlkg.com/image-101499113-15767014"],
        images: [
          "assets/img/mavis.png",
          "assets/img/mavis1.png"
        ]
      },

      /* ✅ NEW: MyAutoLoan Affiliate Listing */
      {
        id: "auto-loan-myautoloan",
        category: "auto-loans",
        title: "Auto Loans — Compare Offers",
        meta: "MyAutoLoan • Multiple lenders",
        price: 0,
        priceUnit: "free",
        reviews: 520,
        badge: "Compare",
        badgeIcon: "bx-car",
        partnerName: "MyAutoLoan",
        partnerSub: "Compare loan offers online",
        partnerLogo: "assets/img/myautoloan.png",   // <-- you will add image
        pills: ["Fast quotes", "Multiple lenders", "Compare APRs"],
        desc: "Compare auto loan offers from multiple lenders in one place. Great for buying or refinancing a vehicle.",
        linkPrimary: "https://www.dpbolvw.net/click-101499113-10608154",
        // If you later get CJ tracking image/pixel URL(s), add them here:
        pixels: [],
        images: [
          "assets/img/myautoloan.png",              // <-- you will add image
          "assets/img/myautoloan1.png"              // <-- optional second slide if you want
        ]
      }
    ];

    // =========================
    // STATE (favorites removed)
    // =========================
    const state = {
      slideIndexById: {}
    };

    const grid = document.getElementById("serviceGrid");

    // =========================
    // RENDER
    // =========================
    function renderListings(){
      if (!grid) return;
      grid.innerHTML = "";

      LISTINGS.forEach(item => {
        if (state.slideIndexById[item.id] == null) state.slideIndexById[item.id] = 0;
        const idx = state.slideIndexById[item.id];

        const card = document.createElement("article");
        card.className = "mk-card";
        card.setAttribute("data-id", item.id);

        const currentImg = (item.images && item.images[idx]) ? item.images[idx] : "";
        const isLocal = isLocalAsset(currentImg);

        card.innerHTML = `
          <div class="mk-media" data-id="${escapeHtml(item.id)}">
            <img
              src="${escapeHtml(currentImg)}"
              alt="${escapeHtml(item.title)}"
              loading="lazy"
              decoding="async"
              referrerpolicy="no-referrer"
              class="${isLocal ? "is-local" : ""}"
            />

            <div class="mk-badgeRow">
              <span class="mk-badge"><i class="bx ${escapeHtml(item.badgeIcon)}"></i> ${escapeHtml(item.badge)}</span>
              <span style="width:42px;height:42px;"></span>
            </div>

            <div class="mk-arrows" aria-hidden="false">
              <button class="mk-arrow" type="button" aria-label="Previous image" data-prev="${escapeHtml(item.id)}">
                <i class="bx bx-chevron-left"></i>
              </button>
              <button class="mk-arrow" type="button" aria-label="Next image" data-next="${escapeHtml(item.id)}">
                <i class="bx bx-chevron-right"></i>
              </button>
            </div>

            <div class="mk-dots" aria-label="Image position">
              ${(item.images || []).map((_,i)=>`<span class="mk-dot" aria-current="${i===idx ? "true":"false"}"></span>`).join("")}
            </div>
          </div>

          <div class="mk-body">
            <div class="mk-topLine">
              <h3 class="mk-h3">${escapeHtml(item.title)}</h3>
            </div>

            <p class="mk-meta">${escapeHtml(item.meta)} • ${formatReviews(item.reviews)} reviews</p>

            <div class="mk-partner" aria-label="Partner">
              <div class="mk-partnerLeft">
                <div class="mk-partnerLogo">
                  <img src="${escapeHtml(item.partnerLogo)}" alt="${escapeHtml(item.partnerName)} logo" />
                </div>
                <div class="mk-partnerText">
                  <b>${escapeHtml(item.partnerName)}</b>
                  <span>${escapeHtml(item.partnerSub)}</span>
                </div>
              </div>
              <span class="mk-badge" style="padding:7px 10px;font-size:.78rem;">
                <i class="bx bx-link-external"></i> Partner
              </span>
            </div>

            <div class="mk-pills">
              ${(item.pills || []).slice(0,3).map(p=>`
                <span class="mk-pill"><i class="bx bx-check-circle"></i> ${escapeHtml(p)}</span>
              `).join("")}
            </div>

            <div class="mk-bottom">
              <div class="mk-price">${formatPrice(item.price, item.priceUnit)}</div>

              <div class="mk-actions">
                <a class="mk-cta" href="${escapeHtml(item.linkPrimary)}" target="_top" rel="nofollow sponsored">
                  <i class="bx bx-link-external"></i> Get offer
                </a>

                <button class="mk-infoBtn quick-view" type="button" data-modal="${escapeHtml(item.id)}" aria-label="Details">
                  <i class="bx bx-info-circle"></i>
                </button>
              </div>
            </div>

            ${(item.linkSecondary && item.secondaryLabel) ? `
              <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:2px;">
                <a class="btn btn--secondary" href="${escapeHtml(item.linkSecondary)}" target="_top" rel="nofollow sponsored" style="border-radius:14px;">
                  <i class="bx bx-coupon"></i> ${escapeHtml(item.secondaryLabel)}
                </a>
              </div>
            ` : ``}

            ${(item.pixels || []).map(px => `
              <span class="trk" aria-hidden="true">
                <img src="${escapeHtml(px)}" width="1" height="1" border="0" alt="" />
              </span>
            `).join("")}
          </div>
        `;

        grid.appendChild(card);
      });

      // wire carousel
      grid.querySelectorAll("[data-prev]").forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          slide(btn.dataset.prev, -1);
        });
      });
      grid.querySelectorAll("[data-next]").forEach(btn => {
        btn.addEventListener("click", (e) => {
          e.stopPropagation();
          slide(btn.dataset.next, +1);
        });
      });

      // open modal
      grid.querySelectorAll(".quick-view").forEach(btn => {
        btn.addEventListener("click", () => openModal(btn.getAttribute("data-modal")));
      });

      // click image area opens modal
      grid.querySelectorAll(".mk-media").forEach(m => {
        m.addEventListener("click", (e) => {
          const id = m.dataset.id;
          if (e.target.closest("[data-prev]") || e.target.closest("[data-next]")) return;
          openModal(id);
        });
      });
    }

    function slide(id, dir){
      const item = LISTINGS.find(x => x.id === id);
      if (!item) return;
      const imgs = item.images || [];
      if (!imgs.length) return;

      let idx = state.slideIndexById[id] ?? 0;
      idx = (idx + dir + imgs.length) % imgs.length;
      state.slideIndexById[id] = idx;
      renderListings();
    }

    // =========================
    // MODAL
    // =========================
    const modal = document.getElementById("modal");
    const modalContent = document.getElementById("modalContent");
    const modalCloseBtn = modal?.querySelector(".modal__close");

    function openModal(id) {
      if (!modal || !modalContent) return;
      const item = LISTINGS.find(x => x.id === id);
      if (!item) return;

      modalContent.innerHTML = `
        <h3>${escapeHtml(item.title)}</h3>
        <p>${escapeHtml(item.desc)}</p>

        <ul class="mk-modalPills" aria-label="Highlights">
          ${(item.pills || []).map(x => `<li>${escapeHtml(x)}</li>`).join("")}
        </ul>

        <p style="margin-top:.75rem;">
          <strong>Partner:</strong> ${escapeHtml(item.partnerName)} • ${escapeHtml(item.partnerSub)}
          <br/>
          <strong>Reviews:</strong> ${formatReviews(item.reviews)}
          <br/>
          <strong>Price:</strong> ${stripHtml(formatPrice(item.price, item.priceUnit))}
        </p>

        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:1rem;">
          <a class="btn btn--primary" href="${escapeHtml(item.linkPrimary)}" target="_top" rel="nofollow sponsored" style="border-radius:14px;">
            <i class="bx bx-link-external"></i> Go to partner
          </a>
          ${item.linkSecondary ? `
            <a class="btn btn--secondary" href="${escapeHtml(item.linkSecondary)}" target="_top" rel="nofollow sponsored" style="border-radius:14px;">
              <i class="bx bx-coupon"></i> ${escapeHtml(item.secondaryLabel || "Secondary offer")}
            </a>
          ` : ``}
        </div>

        <p style="margin-top:1rem;">
          <strong>Tip:</strong> Always review details and confirm what’s included before purchasing.
        </p>
      `;

      modal.setAttribute("aria-hidden", "false");
      document.body.style.overflow = "hidden";
      modalCloseBtn?.focus();
    }

    function closeModal() {
      if (!modal) return;
      modal.setAttribute("aria-hidden", "true");
      document.body.style.overflow = "";
    }

    modalCloseBtn?.addEventListener("click", closeModal);
    modal?.addEventListener("click", (e) => { if (e.target === modal) closeModal(); });
    window.addEventListener("keydown", (e) => { if (e.key === "Escape") closeModal(); });

    // =========================
    // Helpers
    // =========================
    function isLocalAsset(url){
      const u = String(url || "");
      return u.startsWith("assets/") || u.startsWith("./assets/") || u.startsWith("../assets/");
    }

    function formatPrice(price, unit){
      const p = Number(price || 0);
      if (!p) return `$0 <span>(${unit || "free"})</span>`;
      if (unit === "avg/mo") return `$${p} <span>/mo avg</span>`;
      if (unit === "starting") return `$${p} <span>starting</span>`;
      if (unit === "from") return `$${p} <span>from</span>`;
      return `$${p} <span>${unit || ""}</span>`;
    }

    function stripHtml(html){
      const tmp = document.createElement("div");
      tmp.innerHTML = html;
      return tmp.textContent || tmp.innerText || "";
    }

    function formatReviews(n){
      const num = Number(n || 0);
      if (!num) return "0";
      if (num >= 1000) return (num/1000).toFixed(1).replace(".0","") + "k";
      return String(num);
    }

    function escapeHtml(str){
      return String(str ?? "")
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    // Initial render
    renderListings();
  </script>
</body>
</html>



